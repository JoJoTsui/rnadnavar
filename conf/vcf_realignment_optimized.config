/*
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    VCF Realignment Optimization Configuration
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    Configuration profile for optimized VCF-based realignment workflow
    This profile enables all optimization features for maximum stability and performance
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
*/

params {
    // Enable VCF-based realignment with full optimization
    realignment_mode                    = 'vcf'
    enable_vcf_realignment_optimization = true
    
    // Enable all optimization features
    enable_channel_sanitization        = true
    enable_safe_channel_join            = true
    enable_enhanced_cram_conversion     = true
    enable_process_monitoring           = true
    enable_input_validation             = true
    enable_command_validation           = true
    
    // Disable backward compatibility flags (use optimized version)
    force_legacy_realignment            = false
    disable_realignment_optimization    = false
    
    // Enhanced error handling and logging
    process.errorStrategy               = 'retry'
    process.maxRetries                  = 2
    
    // Memory optimization for large datasets
    process {
        withName: 'ENHANCED_CRAM2BAM_CONVERSION' {
            memory = { check_max( 8.GB * task.attempt, 'memory' ) }
            cpus   = { check_max( 4 * task.attempt, 'cpus' ) }
        }
        withName: 'SAFE_CHANNEL_JOIN' {
            memory = { check_max( 4.GB * task.attempt, 'memory' ) }
        }
        withName: 'SANITIZE_CHANNELS' {
            memory = { check_max( 2.GB * task.attempt, 'memory' ) }
        }
    }
}