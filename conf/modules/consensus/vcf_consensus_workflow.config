/*
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    Config file for VCF Consensus Workflow module
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
*/

process {
    withName: 'VCF_CONSENSUS' {
        ext.prefix = { "${meta.id}" }
        ext.thr = 2
        publishDir = [
            mode: params.publish_dir_mode,
            path: { "${params.outdir}/consensus/${meta.id}/" },
            pattern: "*{vcf,vcf.gz,vcf.gz.tbi}"
        ]
    }

    withName: 'VCF_CONSENSUS_RESCUE' {
        ext.prefix = { "${meta.id}" }
        ext.thr = 2
        publishDir = [
            mode: params.publish_dir_mode,
            path: { "${params.outdir}/rescue/${meta.id}/" },
            pattern: "*{vcf,vcf.gz,vcf.gz.tbi}"
        ]
    }

    withName: 'VCF_RESCUE' {
        ext.prefix = { "${meta.id}" }
        ext.snv_thr = 2
        ext.indel_thr = 2
        publishDir = [
            mode: params.publish_dir_mode,
            path: { "${params.outdir}/rescue/${meta.id}/" },
            pattern: "*{vcf,vcf.gz,vcf.gz.tbi}"
        ]
    }

    withName: 'VCF_RESCUE_FILTER' {
        ext.prefix = { "${meta.id}" }
        ext.dna_thr = 2
        ext.rna_thr = 2
        publishDir = [
            mode: params.publish_dir_mode,
            path: { "${params.outdir}/filtered/${meta.id}/" },
            pattern: "*{vcf,vcf.gz,vcf.gz.tbi}"
        ]
    }
}
